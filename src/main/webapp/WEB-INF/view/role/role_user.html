
<!DOCTYPE html>
<html oncontextmenu="return false">
	<head>
	  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta http-equiv="content-type" content="text/html;charset=utf-8"> 
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<%include("../layout/form.html"){} %>

</head>
<body id="body" style="background:#F7F7F7;" >
 <br />
 <form id="form_new" class="form-horizontal form-label-left" method="post">

  <div class="col-md-12 col-sm-12 col-xs-12">
                <div class="x_panel">
                  <div class="x_title">
                    <h2>用户列表</h2>
                    <ul class="nav navbar-right panel_toolbox">
                      <li class="pull-right"><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                      </li>
                    </ul>
                    <div class="clearfix"></div>
                  </div>

							<div class="x_content">

           	                    <% for(ru in list!){ %>
											<div class="col-md-3 col-sm-3 col-xs-12">
				           	  <div class="form-group">
				        			       	<input id="userids_${ru.id}" type="checkbox" name="userids" class="icheck" value="${ru.id}" <% if(ru.checked) {%> checked <% } %> > 
				        			       	 <label for="userids_${ru.id}">${ru.loginName}</label> 
				        			       </div>
														</div>
 									<% } %> 
							</div>
					</div>		 						

         </div>

				<div class="form-group col-md-12 col-sm-12 col-xs-12">
				     <button id="checkallbtn" type="button" class="btn btn-default ">全 选</button>
           <button id="uncheckallbtn" type="button" class="btn btn-default ">全不选</button>
           <button id="savebtn" type="button" class="btn btn-success">保 存</button>
      </div>
</form>
<script type="text/javascript" src="${ctxPath}/static/js/form.js"></script>
<script type="text/javascript">
$('input.icheck').iCheck({
  checkboxClass: 'icheckbox_flat-green',
  radioClass: 'iradio_flat-green'
});
$('#checkallbtn').on('click', function(event){
  $('input.icheck').iCheck('check');
});
$('#uncheckallbtn').on('click', function(event){
  $('input.icheck').iCheck('uncheck');
});

 //保存
$("#savebtn").click(function(){
	 var chk_value =[]; 
  	$('input[name="userids"]:checked').each(function(){ 
  			chk_value.push($(this).val()); 
  		});
	  $.ajax({ 
		   type: "post", 
		   url: "${ctxPath}/role/user_ref", 
		   data: {"user_ids" : chk_value,"role_id":${role_id}}, 
		   success: function (data) { 
					 var index = parent.layer.getFrameIndex(window.name); 
			 		 parent.layer.close(index);
                }
        });
});

</script>
</body>
</html>